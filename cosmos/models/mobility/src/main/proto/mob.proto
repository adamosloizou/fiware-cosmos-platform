package mob;

import "base.proto";

option java_package = "es.tid.cosmos.mobility.data";
option java_outer_classname = "MobProtocol";

message MobData {
    enum Type {
        INVALID = 0;
        INT = 1;
        CDR = 2;
        CELL = 3;
        BTS = 4;
        CLUSTER = 5;
        NODE_BTS_DAY = 6;
    }

    required Type type = 1;
    optional uint32 int = 2;
    optional Cdr cdr = 3;
    optional Cell cell = 4;
    optional Bts bts = 5;
    optional Cluster cluster = 6;
    optional NodeBtsDay nodeBtsDay = 7;
}

message Cdr {
    optional uint64 userId = 1;
    optional uint64 cellId = 2;
    optional base.Date date = 3;
    optional base.Time time = 4;
}

message Cell {
    optional uint64 cellId = 1;
    optional uint64 placeId = 2;
    optional uint32 geoloc1 = 3;
    optional uint32 geoloc2 = 4;
    optional double posx = 5;
    optional double posy = 6;
}

message Bts {
    optional uint64 placeId = 1;
    optional uint64 comms = 2;
    optional double posx = 3;
    optional double posy = 4;
    optional double area = 5;
    repeated uint64 adj_bts = 6;
}

message NodeBts {
    optional uint64 userId = 1;
    optional uint32 placeId = 2;
    optional uint32 weekday = 3;
    optional uint32 range = 4;
}

message BtsCounter {
    optional uint64 placeId = 1;
    optional uint32 weekday = 2;
    optional uint32 range = 3;
    optional uint32 count = 4;
}

message NodeBtsDay {
    optional uint64 userId = 1;
    optional uint64 placeId = 2;
    optional uint32 workday = 3;
    optional uint32 count = 4;
}

message NodeMxCounter {
    repeated BtsCounter bts = 1;
    optional uint32 btsLength = 2;
    optional uint32 btsMaxLength = 3;
}

message TwoInt {
    optional uint64 num1 = 1;
    optional uint64 num2 = 2;
}

message DailyVector {
    repeated TwoInt hours = 1;
}

message ClusterVector {
    repeated double coms = 1;
}

message Cluster {
    optional uint32 label = 1;
    optional uint32 labelgroup = 2;
    optional uint32 confident = 3;
    optional double mean = 4;
    optional double distance = 5;
    optional ClusterVector coords = 6;
}

message GLEvent {
    optional uint64 userId = 1;
    optional uint64 placeId = 2;
    optional base.Date date = 3;
    optional base.Time time = 4;
}

message ActivityAreaKey {
    optional uint64 userId = 1;
    optional uint32 month = 2;
    optional bool isWorkDay = 3;
}

message ActivityArea {
    optional uint32 numPos = 1;
    optional uint32 difBtss = 2;
    optional uint32 difMuns = 3;
    optional uint32 difStates = 4;
    optional double masscenterUtmX = 5;
    optional double masscenterUtmY = 6;
    optional double radius = 7;
    optional double diamAreaInf = 8;
}

message TelMonth {
    optional uint64 phone = 1;
    optional uint32 month = 2;
    optional bool workingday = 3;
}
