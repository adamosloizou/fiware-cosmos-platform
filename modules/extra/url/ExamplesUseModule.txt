// Low
set url.num_users		10
set url.num_servers       	10
set url.num_paths_per_server	10
set url.num_urls_per_user	2
set url.num_servers_ref		5
set url.num_categories		4
set url.num_hits		3
set url.fixed_categories	1

// Medium
set url.num_users		100000
set url.num_servers		1000
set url.num_paths_per_server	100
set url.num_urls_per_user	100
set url.num_servers_ref		50
set url.num_categories		10
set url.num_hits		5
set url.fixed_categories	1


// Create the URLs and servers
url.fakeURLs urls -create -clear
url.fakeServers servers serversRev -create -clear
url.fakeInfos categories -create -clear

url.exportURL_Void urls urls.txt -clear -create
url.exportString_UInt servers servers.txt -clear -create
url.exportUInt_CategoryVector categories categories.txt -clear -create
download urls.txt urls.txt
download servers.txt servers.txt
download categories.txt categories.txt

// Parse and Map URLs
url.getServerURL urls serverStr_userpath -create -clear

// Fuse server
url.fuseServer serverStr_userpath servers server_user user_server server_path user_serverPath -create -clear

#
# Server INFO categories problem
#


// Create vectors clusters of servers for every user
url.getServersFromUser user_server serversVector -create -clear

// Expand categories to every server in the vector
url.AssociateCategoriesToServers categories serversVector categories_new  -clear -create

// And average categories for server
# Not sure -clear_input is being used properly here
#url.FuseServerCategory categories categories_new categories -create -clear -clear_input
url.FuseServerCategory categories categories_new cateries_updated -create -clear 
rm categories
mv cateries_updated categories

// And prepare to print
url.DecodeServerCategories serversRev categories serverStr_categories -clear -create
url.exportServerCategories serverStr_categories categories_new.txt -create -clear

download categories_new.txt categories_new.txt


#
# Server TOP hits problem
#


// Compute and sort paths in servers, and truncate to url.num_hits
url.getPathCount server_path server_path_hits -clear -create

// and export them
url.DecodeServerHits serversRev server_path_hits serverStr_path_hits -clear -create

url.exportServerPathHits serverStr_path_hits serverStr_path_hits.txt -create -clear
download serverStr_path_hits.txt serverStr_path_hits.txt

#
# User INFO categories problem
#


// Create vectors clusters of users for every server
url.getUsersFromServer server_user usersVector -create -clear

// Expand categories to every server in the vector
url.AssociateCategoriesToUsers categories usersVector user_categories -clear -create

// And average categories for server
url.FuseUserCategory user_categories listUserCategories -create -clear

// And prepare to print
url.exportUserCategories listUserCategories listUserCategories.txt -create -clear
download listUserCategories.txt listUserCategories.txt

#
# Category PROMINENT hits problem
#

url.AssociateCategoriesToServerPaths categories server_path cat_serverPath -create -clear
url.SumServerPathsPerCategory cat_serverPath cat_serverPathVector -create -clear
add -f cat_serverPathVector_ref system.UInt url.ServerPathVector 

# Not sure -clear_input is being used properly here
#url.FuseCategoryHits cat_serverPathVector_ref cat_serverPathVector cat_serverPathVector_ref -clear -create -clear_input
url.FuseCategoryHits cat_serverPathVector_ref cat_serverPathVector cat_serverPathVector_updated -clear -create 
rm cat_serverPathVector_ref
mv cat_serverPathVector_updated cat_serverPathVector_ref

url.exportHitsPerCategory cat_serverPathVector_ref cat_serverPathVector_ref.txt -create -clear
download cat_serverPathVector_ref.txt cat_serverPathVector_ref.txt


# If you want to have server as String

url.ExpandCategoryHits cat_serverPathVector server_catPath -create -clear
url.DecodeServerForCategories serversRev  server_catPath cat_serverStrPath -create -clear
url.SumServerStrPathsPerCategories cat_serverStrPath cat_serverStrPathVector -create -clear

url.exportHitsPerCategoryWithStrings cat_serverStrPathVector cat_serverStrPathVector.txt -create -clear
download cat_serverStrPathVector.txt cat_serverStrPathVector.txt

#
# URLs RECOMENDATION for users problem
#

url.EmitUsersPerCategory listUserCategories  cat_user -create -clear
url.AssociateHitsPerCategoryToUsers cat_serverPathVector_ref cat_user user_serverPathCount -create -clear
url.SumServerPathFromUser user_serverPathCount user_serverPathVector_suitable -create -clear
url.getServerPathFromUser user_serverPath user_serverPathVector_visited -create -clear
url.ClearVisitedURLs user_serverPathVector_suitable user_serverPathVector_visited user_serverPathVector_recommended -create -clear

url.exportHitsRecommendationPerUser user_serverPathVector_recommended user_serverPathVector_recommended.txt -create -clear
download user_serverPathVector_recommended.txt user_serverPathVector_recommended.txt

url.exportHitsRecommendationPerUser user_serverPathVector_suitable user_serverPathVector_suitable.txt -create -clear
download user_serverPathVector_suitable.txt user_serverPathVector_suitable.txt
url.exportHitsRecommendationPerUser user_serverPathVector_visited user_serverPathVector_visited.txt -create -clear
download user_serverPathVector_visited.txt user_serverPathVector_visited.txt


# SCRIPTS

url.script_GeneratingFakes urls servers serversRev categories -create -clear
url.script_GeneratingFakes_fixed urls servers serversRev categories -create -clear
url.script_PrepareBasicData urls servers server_user user_server server_path user_serverPath -create -clear
url.script_ServerCategoriesDistribution user_server serversRev categories categories.txt -create -clear
url.script_TopHits server_path serversRev serverStr_path_hits serverStr_path_hits.txt -create 
url.script_UserCategoriesDistribution server_user categories listUserCategories listUserCategories.txt -create -clear
url.script_HitsPerCategory categories server_path serversRev cat_serverPathVector_ref cat_serverPathVector_ref.txt -create -clear
url.script_HitsRecommendation listUserCategories cat_serverPathVector_ref user_serverPath user_serverPathVector_recommended user_serverPathVector_recommended.txt -create -clear







