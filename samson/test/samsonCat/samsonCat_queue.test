--NAME--
samsonCat - queue
--SHELL--
delilah -log_classic  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST}:${SAMSON_WORKER_PORT_ENV}  -command remove_all
delilah -log_classic  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST}:${SAMSON_WORKER_PORT_ENV}  -command "push_module ${SAMSON_HOME}/modules/libsystem.so"  
delilah -log_classic  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST}:${SAMSON_WORKER_PORT_ENV}  -command "push_module ${SAMSON_HOME}/modules/libtxt.so"
samsonPush -node ${SAMSON_TEST_HOST}:${SAMSON_WORKER_PORT_ENV} input < input.txt
delilah -log_classic  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST}:${SAMSON_WORKER_PORT_ENV}  -command "run txt.parser_words -input input -output words"
delilah -log_classic  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST}:${SAMSON_WORKER_PORT_ENV}  -command "wait"
delilah -log_classic  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST}:${SAMSON_WORKER_PORT_ENV}  -command "run txt.word_count_accumulate -input 'words words_count' -output words_count"
delilah -log_classic  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST}:${SAMSON_WORKER_PORT_ENV}  -command "wait"
delilah -log_classic  ${SAMSON_LOG_LEVELS} -log_port ${SAMSON_LOG_PORT_ENV} ${SAMSON_TEST_HOST}:${SAMSON_WORKER_PORT_ENV}  -command "pop words_count /tmp/words_count_samsonCat_queue -force"
ls -lrt /tmp/words_count_samsonCat_queue > /tmp/words_count_samsonCat_queue.info
samsonCat /tmp/words_count_samsonCat_queue | sort
--EXPECT--
"015211078" 4
"072866046" 3
"140660895" 2
"160420776" 1
"221322853" 1
"364161913" 1
"446334716" 1
"528316139" 1
"549570687" 1
"739014846" 1
