{% extends "admin/base.html" %}


{% load i18n %}

{% block content %}
<div id="content-main">
	<h1 class="h-title">{{ "BDP Configuration" }}</h1>
	<a>{{ "1. Ingestion" }}</a> &rsaquo;&rsaquo;&rsaquo;
    <a>{{ "2. Pre-processing" }}</a> &rsaquo;&rsaquo;&rsaquo;
    {% ifequal step step_count %}
		<a>{{ "3. Processing and Consumption" }}</a> &rsaquo;&rsaquo;&rsaquo;
		<a id="a-ingestion">{{ "4. Final Step" }}</a><br/>
	{% else %}	
		<a id="a-ingestion">{{ "3. Processing and Consumption" }}</a><br/>
	{% endifequal %}	
    <form {% if form.form.is_multipart %}enctype="multipart/form-data" {% endif %}method="post" action="" id="{{ opts.module_name }}_form">{% csrf_token %}
        <div>
            {% if form.form.errors %}
            <p class="errornote">
                {% blocktrans count form.form.errors|length as counter %}Please correct the error below.{% plural %}Please correct the errors below.{% endblocktrans %}
            </p>
            <ul class="errorlist">
                {% for error in form.form.non_field_errors %}
                <li>{{ error }}</li>{% endfor %}
            </ul>
            {% endif %}
            <br/>           
				  
		    <h2 class="h-label">{{ "Attributes Configuration" }}</h2>
		    <div class="pre-div" style="height: 30px">
			    <div class="pre-div-left">
			        {{ form.message.errors }}
			        <label class="label-cons-form" for="id_type">Job Name</label>
	        	 	{{ form.job_name }}		       
			    </div>
			    <div class="pre-div-right">
			        {{ form.message.errors }}
			        <label for="id_type">Grouping Fields</label>
	        	 	{{ form.grouping_fields }}
			    </div>	
			</div><br/>
			
			{% if form.attributes_fields %}
				<h2 class="h-label">{{ "Available Attributes" }}</h2>
		        <div class="cons-div" style="height: 78px">	        		
		 			{% for attribute in form.attributes_fields.field.choices %}
		 				{% if attribute.0 %}			 					
		 					<div style="width: 25%; float: left">
		 						<label><input type="checkbox" name="choices" value="attribute"/>{{ attribute.0 }}</label>	
		 					</div>
		 				{% endif %}			 		 
		 			{% endfor %}			
		        </div>	
		    {% endif %}<br/>    
		         
		   	<h2 class="h-label">{{ "Consumption" }}</h2>
		    <div class="pre-div" style="height: 58px">
			    <div class="pre-div-left">		    
			        {{ form.subject.errors }}
			        <label for="id_type">Consumption Path</label>
			        {{ form.consumption_path }}
			    </div>
			    <div class="pre-div-right">  
			    	{{ form.subject.errors }}  
			        <label class="label-cons-form" for="id_type" style="width: 150px">Consumption Mode</label>
			        {{ form.mode }}
			    </div>   
		    </div><br/>
		    
            <input type="hidden" name="{{ step_field }}" value="{{ step0 }}" />
            {{ previous_fields|safe }}
			
			{% ifequal step step_count %}
	            <div id="buttons-div" class="submit-row" align="right">
	            	<input type="reset" value="Cancel" class="button" name="_cancel"/>
             		<input type="button" value="&laquo; Back" class="button"/>
                	<input type="submit" value="{% ifequal step step_count %}Finish{% else %}Next &raquo;{% endifequal %}" class="button" name="_save"/>                           	          
	            </div>
			{% else %}
	            <div id="buttons-div" class="submit-row" align="right">
	             	<input type="reset" value="Cancel" class="button" name="_cancel"/>
             		<input type="button" value="&laquo; Back" class="button"/>
             		<input type="submit" value="{% ifequal step step_count %}Finish{% else %}Add Step &raquo;{% endifequal %}" class="button" name="_save" style="width: 100px"/>             
                	<input type="submit" value="Finish" class="button" name="_save"/>             
	            </div>			
			{% endifequal %}

            <script type="text/javascript">document.getElementById("{{ form.first_field.auto_id }}").focus();</script>
        </div>
    </form>
</div>
{% endblock %}