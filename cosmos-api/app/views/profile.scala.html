@(tuProfile: es.tid.cosmos.api.oauth2.UserProfile,
  cosmosProfile: es.tid.cosmos.api.controllers.pages.CosmosProfile)(implicit request: RequestHeader)
@import play.api.Play.current
@import es.tid.cosmos.api.controllers.cosmos.{routes => cosmosRoutes}
@import es.tid.cosmos.api.controllers.pages
@import es.tid.cosmos.api.controllers.pages.NamedKey
<!--
 Telefónica Digital - Product Development and Innovation

 THIS CODE AND INFORMATION ARE PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND,
 EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED
 WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR PURPOSE.

 Copyright (c) Telefónica Investigación y Desarrollo S.A.U.
 All rights reserved.
 -->
@main("Cosmos user profile for @profile.fullName") {
    <ul id="headernav">
        <li><a href="@pages.routes.Pages.logout()">Logout</a></li>
    </ul>

    <h1 class="page-title">Profile for @tuProfile.contact</h1>

    <ul>
        <li>User handle: <strong>@cosmosProfile.handle</strong></li>
        <li>Public keys
            @for(NamedKey(name, signature) <- cosmosProfile.keys) {
                <div class="key">
                    <div class="name">@name</div>
                    <div class="signature">@signature</div>
                </div>
            }
        </li>
    </ul>

    <h2>Getting started</h2>

    <ol>
        <li><p>
            System requirements are
            <a href="http://www.python.org/download/releases/2.7/">python 2.7</a> with
            <a href="https://pypi.python.org/pypi/setuptools">setuptools</a>.
        </p></li>

        <li><p>
            Install the Cosmos CLI:
            @if(current.configuration.getString("cli.url").isDefined) {
                <tt>easy_install @{current.configuration.getString("cli.url").get}</tt>
            } else {
                <tt>easy_install cosmos-x.y-z.egg</tt>
            }
        </p></li>

        <li><p>Configure the tool: <tt>cosmos configure</tt>.</p></li>

        <ul>
            <li><p>
                Use <a href="@cosmosRoutes.CosmosResource.version().absoluteURL(secure = false)">
                @cosmosRoutes.CosmosResource.version().absoluteURL(secure = false)</a> as the API
                base URL
            </p></li>
            <li>
                <p>
                    Provide your API credentials (please, don't share with anyone):
                    <a id="show-credentials" href="#">show credentials</a>
                    <a id="hide-credentials" href="#" style="display: none">hide credentials</a>
                </p>

                <table id="credentials" style="display: none">
                    <tbody>
                        <tr>
                            <th>API key</th>
                            <td>@cosmosProfile.apiCredentials.apiKey</td>
                        </tr>
                        <tr>
                            <th>API secret</th>
                            <td>@cosmosProfile.apiCredentials.apiSecret</td>
                        </tr>
                    </tbody>
                </table>
            </li>
        </ul>

    </ol>

    <h2>Use the Cosmos CLI</h2>

    <p>Cosmos CLI is a script that allows you to create, list and, work in general, with Cosmos
       clusters from the command line.
    </p>

    <p>Cluster creation:</p>
    <pre class="code">
    $ cosmos create --name "Number cruncher" --size 4
    Provisioning new cluster dfbf0ab91099442f9014c3d4e2605b63
    </pre>

    <p>List clusters:</p>
    <pre class="code">
    $ cosmos list
    Available clusters:
     * dfbf0ab91099442f9014c3d4e2605b63
    </pre>

    <p>Cluster details:</p>
    <pre class="code">
    $ cosmos show dfbf0ab91099442f9014c3d4e2605b63
    {
        "href": "@cosmosRoutes.CosmosResource.version().absoluteURL(secure = false)/cluster/dfbf0ab91099442f9014c3d4e2605b63",
        "id": "dfbf0ab91099442f9014c3d4e2605b63",
        "name": "Number cruncher",
        "size": 4,
        "state": "provisioning",
        "state_description": "Cluster is acquiring and configuring resources"
    }
    </pre>

    <p>Cluster termination:</p>
    <pre class="code">
    $ cosmos terminate dfbf0ab91099442f9014c3d4e2605b63
    Terminating cluster dfbf0ab91099442f9014c3d4e2605b63
    </pre>

    <p>Access the persistent storage:</p>
    <ul>
        <li>List files <tt>cosmos ls &lt;path&gt;</tt></li>
        <li>Download files <tt>cosmos get &lt;remote_path&gt;  &lt;local_path&gt;</tt></li>
        <li>Upload files <tt>cosmos put &lt;local_path&gt; &lt;remote_path&gt;</tt></li>
        <li>Remove files <tt>cosmos rm [-r] &lt;path&gt;</tt></li>
    </ul>

    <h2>Use the REST API</h2>

    <p>You can also integrate directly with the REST API to automate tasks.</p>

    <p><a href="doc.html">Play with the API</a> and learn by doing!</p>
}
